@(registerform : Form[models.User])
@import helper._

<!DOCTYPE html>
<!-- ---------------------------- Farsi Edition ---------------------- -->
<html lang="fa" dir="rtl">
<head>
	<meta http-equiv="content-type" content="text/html; charset=utf-8" >
	<title>نام نویسی</title>
    <link rel="stylesheet" media="screen" href="@routes.Assets.at("stylesheets/FarsiSignup.css")">
    <link rel="shortcut icon" type="image/png" href="@routes.Assets.at("images/icons/Logo.gif")">
    <script src="@routes.Assets.at("javascripts/jquery-1.9.0.min.js")" type="text/javascript"></script>
    <script src="@routes.Assets.at("javascripts/jquery.ui.widgets.js")" type="text/javascript"></script>
        <script src="@routes.Assets.at("javascripts/jquery.iframe-transport.js")" type="text/javascript"></script>
        <script src="@routes.Assets.at("javascripts/jquery.fileupload.js")" type="text/javascript"></script>
        <script src="@routes.Assets.at("javascripts/jquery.cloudinary.js")" type="text/javascript"></script>
		<script src="http://widget.cloudinary.com/global/all.js" type="text/javascript"></script> 

<!--         <script type="text/javascript">
   				$.cloudinary.config({"api_key":"187356621496487","cloud_name":"cloudinary-sinaaps"});
		</script> -->
</head>
<body>
<div id="wrapper">
	<div id="registerForm">
		@helper.form(action = controllers.controllersFarsi.routes.Signup.authenticate, 'enctype -> "multipart/form-data"){
		<fieldset>
			<legend>فرم نام نویسی در "فارسی ریدز"</legend>
			@inputText(registerform("fName"), '_label -> "نام*",'_help -> "ترجیحا با حروف فارسی بنویسید" )
			@inputText(registerform("lName"), '_label -> "فامیلی")
			@inputText(registerform("email"), '_label -> "ایمیل*", '_help -> "لطفا آدرس ایمیل فعال خود را وارد کنید")
			@inputText(registerform("repeatEmail"), '_label -> "ایمیل را دوباره وارد کنید", '_error -> registerform.globalError)
			@inputPassword(registerform("password"), '_label -> "پسورد*", '_help -> "لطفا از حروف و اعداد لاتین استفاده کنید")

			<p style="margin-bottom:0px;"> <span style="margin-right:20px;font-weight:bold;">زاد روز </span>
						<a href="http://calendar.ut.ac.ir/Fa/Software/CalConv.asp">(تبدیل تاریخ خورشیدی به میلادی)</a></p>
			@select(registerform("day"), options("1"->"1", "2"->"2", "3"->"3", "4"->"4", "5"->"5", "6"->"6",
					 "7"->"7", "8"->"8", "9"->"9", "10"->"10", "11"->"11", "12"->"12", "13"->"13", "14"->"14",
						 "15"->"15", "16"->"16", "17"->"17", "18"->"18", "19"->"19", "20"->"20", "21"->"21", "22"->"22",
							 "23"->"23", "24"->"24", "25"->"25", "26"->"26", "27"->"27", "28"->"28", "29"->"29", "30"->"30", 
								 "31"->"31"),'_label -> "روز")
								 
			@select(registerform("month"), options("1"->"January", "2"->"February", "3"->"March", "4"->"April", "5"->"May",
					"6"->"June", "7"->"July", "8"->"August", "9"->"September", "10"->"October", 
						"11"->"November", "12"->"December"),'_label -> "ماه")
					
			@select(registerform("year"), options("1954"->"1954","1955"->"1955","1956"->"1956","1957"->"1957","1958"->"1958",
				"1959"->"1959","1960"->"1960","1961"->"1961","1962"->"1962","1963"->"1963","1964"->"1964",
				"1965"->"1965","1966"->"1966","1967"->"1967","1968"->"1968","1969"->"1969","1970"->"1970",
				"1971"->"1971","1972"->"1972","1973"->"1973","1974"->"1974","1975"->"1975","1976"->"1976",
				"1977"->"1977","1978"->"1978","1979"->"1979","1980"->"1980", "1981"->"1981", "1982"->"1982", 
				"1983"->"1983", "1984"->"1984","1985"->"1985", "1986"->"1986", "1987"->"1987", "1988"->"1988",
					"1989"->"1989", "1990"->"1990", "1991"->"1991", "1992"->"1992", "1993"->"1993", "1994"->"1994",	
						"1995"->"1995", "1996"->"1996", "1997"->"1997", "1998"->"1998", "1999"->"1999", "2000"->"2000",	
							"2001"->"2001", "2002"->"2002", "2003"->"2003", "2004"->"2004", "2005"->"2005", "2006"->"2006",
								"2007"->"2007", "2008"->"2008", "2009"->"2009"),'_label -> "سال")
	
			<div id="clear"></div>
			@inputRadioGroup( registerform("gender"),
							  options=options("0" -> "مرد" , "1" ->"زن"),
							  '_label -> "جنسیت*",
							  '_help -> ""
			)
			@inputText(registerform("address"), '_label -> "آدرس")
			
			<a href="#" id="upload_widget_opener">Upload image</a>
			
			
			<script type="text/javascript">
				var i = document.getElementsByClassName("cloudinary-thumbnails");
				i.style.display = 'none';
			</script>
			 
			 <script type="text/javascript">  
 				//Using the cloudinary's upload widget to directly upload to the cloud
 				//using this code, the url of the uploaded imaged retrieved from 'result'
 						
 					
 				/*'public_id' could be set to the name of the user and it should be unique.
 				   using the upload settings in the cloudinary, Unsigned uploading is enabled;
 				   That means that the public_id will be automaticalley incremeneted. */
				$('#upload_widget_opener').cloudinary_upload_widget(
						{ 
							  cloud_name: 'cloudinary-sinaaps', upload_preset: 'zi2dsbt2', 
						      cropping: 'server', gravity : 'custom', 'folder': 'user_photos', 
						      multiple : 'false',//public_id : '1234',
						      client_allowed_formats : ["png","gif", "jpeg","jpg"],
						      button_class : 'myUploadClass',
						      button_caption : "آپلود عکس",
						      sources : ['local', 'camera'],
						      text : {
						    	  "sources.local.title" : "فایل‌های من", 
						    	  "sources.local.drop_file": "فایل عکس را اینجا بیاندازید",
						    	  "sources.local.drop_or": "یا ",
						    	  "sources.local.select_file": "انتخاب فایل",
						    	  "sources.camera.title": "دوربین",
						    	  "sources.camera.note": "لطفا مطمئن شوید که مرورگر شما اجازه گرفتن عکس را میدهد؛ در موقعیت مناسب قرار گیرید و دکمه 'عکاسی' رو فشار دهید:",
						    	  "sources.camera.capture": "عکاسی",
						    	  "sources.url.upload": "آپلود کنید",
						    	  "progress.uploading": "در حال آپلود شدن ...",
						    	  "progress.upload_cropped": "آپلود",
						    	  "progress.processing": "در حال آپلود شدن...",
						    	  "progress.retry_upload": "دوباره امتحان کنید",
						    	  "progress.use_succeeded": "اوکی"}
						 },
						 function(error, result) { 
							//--(Testing purposes) console.log(error, result);
						   					
							//This piece of nagging code gets the 'result' which contains(1 ele array)
							//the JSON rep of the uploaded image. It should be first stringify
							// then would be parsed to an object and ready to get retrieved
							var json = JSON.stringify(result[0]);
							var obj = JSON.parse(json);
							//window.alert(obj.url);
							document.getElementById("photo_input").value = obj.url;
							
							/*This peice of code is to disable a user to upload many photos.
							  It disables the cloudinary upload button after the upload was successful.*/
							$(document).on('cloudinarywidgetsuccess', function(e, data) {
								$(".myUploadClass").prop('disabled', true);
								$(".myUploadClass").hide();
								$("<span style='margin-right:15px;margin-top:0px;'>'آپلود عکس با موفقیت انجام شد'</span>").insertBefore("#hint");
								$("#hint").hide();
								});
								
						  }); 
/* 				var i = document.getElementsByClassName("cloudinary-thumbnails");
				i.style.display = 'none'; */
				
			 </script>

			<input name="photo" id="photo_input" type="hidden" value="">
			<p id ="hint" style="font-size:0.9em;margin-top:2px;margin-right:16px;color:gray;"> آپلود عکس الزامی نیست. برای عکس پروفایلتان تنها یک عکس میتوانید انتخاب کنید</p>
			<input type="submit" value="نام نویسی" id="submitBtn">
			<p style="font-size:0.8em;margin-right:20px;color:gray;">* لطفا قسمتهای ستاره دار را حتما پر کنید</p>
        }
        @if(registerform.hasGlobalErrors){
        	<p id="error"> @registerform.globalError.message </p>
        }
        </fieldset>
	</div><!-- register form -->
	<br>
	<div id="footerImage"><a href="@controllers.controllersFarsi.routes.ApplicationFa.index"><img src="@routes.Assets.at("images/icons/signup.jpg")"></a></div>
	
	<div id="footer">&copy; 2014 تمام حقوق برای "فارسی ریدز" محفوظ میباشد</div>
</div>
</body>
</html>